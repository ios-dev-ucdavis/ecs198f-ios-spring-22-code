# This is a basic workflow to help you get started with Actions

name: Annoucement Notifier
on: 
  discussion:
    types: [created, edited]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  notify:
    if: ${{ github.event.discussion.category.name == 'Announcements' }}
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      - name: Print Body
        run: |
          echo ${{ github.event.discussion }}
          echo ${{ github.event }}
      - name: Webhook Notifier
        uses: joelwmale/webhook-action@master
        with:
          # The webhook URL to send the request to.
          url: ${{ secrets.ANNOUNCEMENT_WEBHOOK }}
          headers: '{ "Content-Type": "application/json" }'
          body: ${{ github.event.discussion }}
          
      
